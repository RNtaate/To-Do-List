(()=>{"use strict";var e=function(e){var t="".concat(e);return(t=t.toLowerCase()).slice(0,1).toUpperCase()+t.slice(1)},t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t='<form action="#" method="POST" class="category-form"><span class="close-form-btn">&times;</span><input type="text" placeholder="Enter name of category" name="categoryName" required value="'.concat(e,'"><input type="submit"></form>');return t},n=function(t){var n,a,o,i,r,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n="",a="",o="",i="",r="",l="",""!==c)switch(n=c.getTaskTitle(),a=c.getTaskDesc(),o=c.getTaskDate().replace(/[/]/g,"-"),l=c.getTaskCat(),c.getPriority()){case"high":i="checked";break;case"medium":r="checked";break;case"low":s="checked"}else s="checked";var u=document.createElement("div"),d=document.createElement("select");d.setAttribute("id","todoCategories");for(var y=0;y<t.length;y+=1){var m=document.createElement("option");m.setAttribute("value",t[y].getName()),l===t[y].getName()&&m.setAttribute("selected","selected"),m.textContent=e(t[y].getName()),d.appendChild(m)}u.appendChild(d);var v="".concat(u.innerHTML),g='<form action="#" method="POST" class="category-form task-form"><span class="close-form-btn">&times;</span><input type="text" placeholder="Enter Task title" id="task-title" required value="'.concat(n,'"><textarea placeholder="Describe your task here" rows="5" id="task-desc" required>').concat(a,'</textarea><label>Task due date : </label><input type="date" placeholder="Give it a due date" id="task-date" required value="').concat(o,'"><label>Task Priority: </label><span><input type="radio" name="priority" id="high" value="high" ').concat(i,'> High</span><span><input type="radio" name="priority" id="medium" value="medium" ').concat(r,'> Medium</span><span><input type="radio" name="priority" id="low" value="low" ').concat(s,"> Low</span><br><label>Category: </label>").concat(v,'<input type="submit"></form>');return g};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const o=function(){function e(t,n,a,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.taskTitle=t,this.taskDesc=n,this.taskDate=a,this.taskPriority=o,this.taskCat=i}var t,n;return t=e,(n=[{key:"getTaskTitle",value:function(){return this.taskTitle}},{key:"getTaskDesc",value:function(){return this.taskDesc}},{key:"getTaskDate",value:function(){return this.taskDate}},{key:"setTaskCat",value:function(e){this.taskCat=e}},{key:"getTaskCat",value:function(){return this.taskCat}},{key:"getPriority",value:function(){return this.taskPriority}},{key:"setTask",value:function(e,t,n,a,o){this.taskTitle=e,this.taskDesc=t,this.taskDate=n,this.taskPriority=a,this.taskCat=o}}])&&a(t.prototype,n),e}(),i=function(e,t){localStorage.setItem(e,JSON.stringify(t))};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.myName=t}var t,n;return t=e,(n=[{key:"getName",value:function(){return this.myName}},{key:"setName",value:function(e){this.myName=e}}])&&r(t.prototype,n),e}();var l=function(){return document.querySelector(".alert-messages-div")},c=function(){return document.querySelector("body")},u=function(e,t){e.style.opacity="0",e.style.visibility="hidden",t.style.pointerEvents="auto",e.style.pointerEvents="none"},d=function(e,t){e.style.opacity="1",e.style.visibility="visible",t.style.pointerEvents="none",e.style.pointerEvents="auto"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=l(),n=c();document.querySelector(".ok-button").addEventListener("click",(function(){u(t,n),null!==e&&e()}))},m=function(){var e=l(),t=c();document.querySelector(".cancel-button").addEventListener("click",(function(){u(e,t)}))},v=function(e){var t=l(),n=c(),a="<p>".concat(e,'</p><div class="alert-buttons-div"><button class="alert-message-btn ok-button">OK</button></div>');t.innerHTML=a,d(t,n),y()},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=l(),a=c(),o="<p>".concat(e,'</p><div class="alert-buttons-div"><button class="alert-message-btn cancel-button">Cancel</button><button class="alert-message-btn ok-button">OK</button></div>');n.innerHTML=o,d(n,a),y(t),m()};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e,t){document.querySelector(".right-pane-upper-section").style.display="none",document.querySelector(".create-task-btn").style.display="none",function(e,t){var n=t.filter((function(t){return t.getTaskTitle().toLowerCase()===e.toLowerCase()}))[0];document.querySelector(".task-details-section").style.display="flex",document.querySelector(".task-heading").textContent=n.getTaskTitle(),document.querySelector(".task-description").textContent=n.getTaskDesc(),document.querySelector(".task-date").textContent="Due Date: ".concat(n.getTaskDate()),document.querySelector(".task-priority").textContent="Priority: ".concat(n.getPriority()),document.querySelector(".task-category-name").textContent="Category Name: ".concat(n.getTaskCat())}(e,t)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=document.querySelector(".task-details-section");n.style.display="none";var a=document.querySelector(".right-pane-upper-section");a.style.display="block";var o=document.querySelector(".create-task-btn");o.style.display="block";var i=document.querySelector(".tasks-list");i.innerHTML="";for(var r=document.querySelector(".inner-right-section-div"),s=0;s<e.length;s+=1){var l=document.createElement("li");l.classList.add("task-list-item"),l.classList.add(e[s].getPriority()),l.setAttribute("title","Click to view task details"),l.addEventListener("click",(function(){p(this.children[0].textContent,t)}));var c=document.createElement("h3");c.textContent=e[s].getTaskTitle();var u=document.createElement("span");u.textContent="Due Date: ".concat(e[s].getTaskDate()),l.appendChild(c),l.appendChild(u),i.appendChild(l)}r.style.display="block"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;document.querySelector(".close-form-btn").addEventListener("click",(function(){t.style.visibility="hidden",t.style.opacity="0"}));var s=document.querySelector(".".concat(n));s.addEventListener("submit",(function(n){for(var l,c,u,d,y,m=function(o){switch(s.elements[o].id){case"task-title":if(a.filter((function(e){return e.getTaskTitle().toLowerCase()===s.elements[o].value.toLowerCase()})).length>0&&(t.style.visibility="hidden",t.style.opacity="0",n.preventDefault(),null===e))return{v:v("Task with that title is already taken, please enter a different task title")};l=s.elements[o].value;break;case"task-desc":c=s.elements[o].value;break;case"task-date":u=s.elements[o].value;break;case"high":case"medium":case"low":s.elements[o].checked&&(d=s.elements[o].value);break;case"todoCategories":y=s.elements[o].value}},g=0;g<s.elements.length;g+=1){var h=m(g);if("object"===k(h))return h.v}if(null===e){var b=new o(l,c,u,d,y);if(a.push(b),i(r,a),"none"===document.querySelector(".no-category-selected").style.display){var C=document.querySelector(".inner-list-items-active");if(null==C)f(a,a);else{var S=a.filter((function(e){return e.getTaskCat().toLowerCase()===C.textContent.toLowerCase()}));f(S,a)}}}else e.setTask(l,c,u,d,y),i(r,a),p(l,a);return t.style.visibility="hidden",t.style.opacity="0",n.preventDefault(),null}))},b=function(e,t,n){var a=new s(e);t.push(a),i(n,t);var o=document.createElement("li");o.classList.add("inner-list-items"),o.textContent=a.getName(),document.querySelector(".inner-item-list").appendChild(o)},C=function(e,t,n){for(var a=document.querySelectorAll(".inner-list-items"),o=0;o<a.length;o+=1)a[o].addEventListener("click",(function(a){for(var o=document.querySelectorAll(".inner-list-items"),i=0;i<o.length;i+=1)o[i].classList.remove("inner-list-items-active");a.target.classList.add("inner-list-items-active"),document.querySelector(".edit-delete-category-div").style.display="flex",document.querySelector(".".concat(e)).style.display="none",document.querySelector(".".concat(t)).textContent=a.target.textContent;var r=n.filter((function(e){return e.getTaskCat().toLowerCase()===a.target.textContent.toLowerCase()}));f(r,n)}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,d=document.querySelector(".".concat(t));document.querySelector(".close-form-btn").addEventListener("click",(function(){n.style.visibility="hidden",n.style.opacity="0"})),d.addEventListener("submit",(function(t){var y=d.elements[0].value;if(null===e)b(y,a,o);else{for(var m=0;m<a.length;m+=1)if(a[m].getName()===e.textContent){a[m].setName(d.elements[0].value);var v=document.querySelector(".category-heading");v.textContent===e.textContent&&(v.textContent=d.elements[0].value);break}i(o,a);for(var g=0;g<r.length;g+=1)r[g].getTaskCat()===e.textContent&&r[g].setTaskCat(d.elements[0].value);"none"!==document.querySelector(".".concat(c)).style.display&&p(document.querySelector(".".concat(u)).textContent,r),e.textContent=d.elements[0].value}d.reset(),n.style.visibility="hidden",n.style.opacity="0",C(s,l,r),t.preventDefault()}))},q=document.querySelector("body"),T=[],L=[],w="myCategories",E="myToDos",x=document.querySelector(".left-pane-div"),D=document.querySelector(".right-pane-div");if(x.innerHTML='<ul><li class="outer-list-items"><span>All</span></li><li class="outer-list-items category-list"><span>Categories<i class="fa fa-caret-down"></i></span><ul class="inner-item-list"></ul></li></ul><div class="category-btns"><button class="new-category-btn">Create New Category</button><div class="edit-delete-category-div"><button class="edit-category-btn">Edit Category</button><button class="delete-category-btn">Delete Category</button></div></div>',D.innerHTML='<section class="right-pane-upper-section"><div class="inner-right-section-div"><h2 class="category-heading"></h2><div class="category-tasks-div"><ul class="tasks-list"></ul><p class="note-par"><b>NOTE: </b>red is for high-priority, green is for medium-priority, blue is for low-priority</p></div></div><h2 class="no-category-selected">Select a Category or click "All" on your left to view created tasks here.</h2></section><button class="create-task-btn">Create new Task</button><section class="task-details-section"><button class="back-btn">Back</button><div class="task-details-div"><h2 class="task-heading"></h2><p class="task-description"></p><span class="task-date"></span><span class="task-category-name"></span><span class="task-priority"></span></div><div class="task-details-btns-div"><button class="edit-task">Edit task</button><button class="delete-task">Delete task</button></div></section>',localStorage.getItem(E))for(var N,A=JSON.parse(localStorage.getItem(E)),O=0;O<A.length;O+=1)N=new o(A[O].taskTitle,A[O].taskDesc,A[O].taskDate,A[O].taskPriority,A[O].taskCat),L.push(N);if(localStorage.getItem(w))for(var P=JSON.parse(localStorage.getItem(w)),H=0;H<P.length;H+=1)b(P[H].myName,T,w);else b("Uncategorised",T,w);for(var M=function(){var e,t=document.querySelector(".inner-list-items-active");null===t?f(L,L):(e=L.filter((function(e){return e.getTaskCat().toLowerCase()===t.textContent.toLowerCase()})),f(e,L))},I=document.querySelectorAll(".outer-list-items > span"),j=0;j<I.length;j+=1)I[j].addEventListener("click",(function(e){for(var t=document.querySelectorAll(".outer-list-items > span"),n=0;n<t.length;n+=1)t[n].classList.remove("outer-active");switch(e.target.classList.add("outer-active"),e.target.textContent){case"All":document.querySelector(".inner-item-list").classList.remove("appear"),document.querySelector(".edit-delete-category-div").style.display="none",document.querySelector(".no-category-selected").style.display="none",document.querySelector(".category-heading").textContent=e.target.textContent,null!=document.querySelector(".selected")&&document.querySelector(".selected").classList.remove("selected"),null!=document.querySelector(".inner-list-items-active")&&document.querySelector(".inner-list-items-active").classList.remove("inner-list-items-active"),f(L,L);break;case"Categories":document.querySelector(".inner-item-list").classList.toggle("appear"),e.target.children[0].classList.toggle("selected"),C("no-category-selected","category-heading",L)}}));var J=document.createElement("div");J.classList.add("category-form-div"),q.appendChild(J);var U=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.innerHTML=null===n?t():t(n.textContent),S(n,"category-form",J,T,w,L,"no-category-selected","category-heading","task-details-section","task-heading"),e.style.visibility="visible",e.style.opacity=1},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;e.innerHTML=null===t?n(a):n(a,t),h(t,e,"task-form",L,E),e.style.visibility="visible",e.style.opacity=1};document.querySelector(".new-category-btn").addEventListener("click",(function(){U(J)})),document.querySelector(".edit-category-btn").addEventListener("click",(function(){var e=document.querySelector(".inner-list-items-active");U(J,e)})),document.querySelector(".delete-category-btn").addEventListener("click",(function(){g("Are you sure you want to delete this category ?",(function(){var e=document.querySelector(".inner-list-items-active");if(e.textContent!==T[0].getName()){for(var t=0;t<L.length;t+=1)L[t].getTaskCat().toLowerCase()===e.textContent.toLowerCase()&&L[t].setTaskCat(T[0].getName());for(var n=0;n<T.length;n+=1)if(T[n].getName().toLowerCase()===e.textContent.toLowerCase()){T.splice(n,1);break}i(w,T),i(E,L),e.remove(),document.querySelector(".inner-right-section-div").style.display="none",document.querySelector(".no-category-selected").style.display="block",document.querySelector(".task-details-section").style.display="none",document.querySelector(".right-pane-upper-section").style.display="block",document.querySelector(".create-task-btn").style.display="block",document.querySelector(".create-task-btn").style.display="block",document.querySelector(".edit-delete-category-div").style.display="none",C("no-category-selected","category-heading",L)}else v("YOU ARE NOT ALLOWED TO DELETE THIS CATEGORY!")}))})),document.querySelector(".create-task-btn").addEventListener("click",(function(){G(J,null,T)})),document.querySelector(".edit-task").addEventListener("click",(function(){for(var e=document.querySelector(".task-heading"),t=0;t<L.length;t+=1)if(e.textContent===L[t].getTaskTitle()){e=L[t];break}G(J,e,T)})),document.querySelector(".back-btn").addEventListener("click",(function(){M()})),document.querySelector(".delete-task").addEventListener("click",(function(){g("Are you sure you want to delete this task?",(function(){for(var e=document.querySelector(".task-heading").textContent,t=0;t<L.length;t+=1)if(L[t].getTaskTitle()===e){L.splice(t,1);break}i(E,L),M()}))}))})();