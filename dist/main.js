(()=>{"use strict";var e=function(e){var t=""+e;return(t=t.toLowerCase()).slice(0,1).toUpperCase()+t.slice(1)},t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t='<form action="#" method="POST" class="category-form"><span class="close-form-btn">&times;</span><input type="text" placeholder="Enter name of category" name="categoryName" required value="'+e+'"><input type="submit"></form>';return t},n=function(t){var n,a,r,o,i,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n=a=r=o=i=l="",""!=c)switch(n=c.getTaskTitle(),a=c.getTaskDesc(),r=c.getTaskDate().replace(/[/]/g,"-"),l=c.getTaskCat(),c.getPriority()){case"high":o="checked";break;case"medium":i="checked";break;case"low":s="checked"}else s="checked";var u=document.createElement("div"),d=document.createElement("select");d.setAttribute("id","todoCategories");for(var y=0;y<t.length;y+=1){var m=document.createElement("option");m.setAttribute("value",t[y].getName()),l===t[y].getName()&&m.setAttribute("selected","selected"),m.textContent=e(t[y].getName()),d.appendChild(m)}u.appendChild(d);var v=u.innerHTML+"",g='<form action="#" method="POST" class="category-form task-form"><span class="close-form-btn">&times;</span><input type="text" placeholder="Enter Task title" id="task-title" required value="'+n+'"><textarea placeholder="Describe your task here" rows="5" id="task-desc" required>'+a+'</textarea><label>Task due date : </label><input type="date" placeholder="Give it a due date" id="task-date" required value="'+r+'"><label>Task Priority: </label><span><input type="radio" name="priority" id="high" value="high" '+o+'> High</span><span><input type="radio" name="priority" id="medium" value="medium" '+i+'> Medium</span><span><input type="radio" name="priority" id="low" value="low" '+s+"> Low</span><br><label>Category: </label>"+v+'<input type="submit"></form>';return g};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const r=function(){function e(t,n,a,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.taskTitle=t,this.taskDesc=n,this.taskDate=a,this.taskPriority=r,this.taskCat=o}var t,n;return t=e,(n=[{key:"getTaskTitle",value:function(){return this.taskTitle}},{key:"getTaskDesc",value:function(){return this.taskDesc}},{key:"getTaskDate",value:function(){return this.taskDate}},{key:"setTaskCat",value:function(e){this.taskCat=e}},{key:"getTaskCat",value:function(){return this.taskCat}},{key:"getPriority",value:function(){return this.taskPriority}},{key:"setTask",value:function(e,t,n,a,r){this.taskTitle=e,this.taskDesc=t,this.taskDate=n,this.taskPriority=a,this.taskCat=r}}])&&a(t.prototype,n),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.myName=t}var t,n;return t=e,(n=[{key:"getName",value:function(){return this.myName}},{key:"setName",value:function(e){this.myName=e}}])&&o(t.prototype,n),e}();var s=function(e,t){localStorage.setItem(e,JSON.stringify(t))},l=function(e,t,n){var a=new i(e);t.push(a),s(n,t);var r=document.createElement("li");r.classList.add("inner-list-items"),r.textContent=a.getName(),document.querySelector(".inner-item-list").appendChild(r)},c=function(e,t){document.querySelector(".right-pane-upper-section").style.display="none",document.querySelector(".create-task-btn").style.display="none",function(e,t){var n=t.filter((function(t){return t.getTaskTitle().toLowerCase()===e.toLowerCase()}));n=n[0],document.querySelector(".task-details-section").style.display="flex",document.querySelector(".task-heading").textContent=n.getTaskTitle(),document.querySelector(".task-description").textContent=n.getTaskDesc(),document.querySelector(".task-date").textContent="Due Date: "+n.getTaskDate(),document.querySelector(".task-priority").textContent="Priority: "+n.getPriority(),document.querySelector(".task-category-name").textContent="Category Name: "+n.getTaskCat()}(e,t)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=document.querySelector(".task-details-section");n.style.display="none";var a=document.querySelector(".right-pane-upper-section");a.style.display="block";var r=document.querySelector(".create-task-btn");r.style.display="block";var o=document.querySelector(".tasks-list");o.innerHTML="";for(var i=document.querySelector(".inner-right-section-div"),s=0;s<e.length;s+=1){var l=document.createElement("li");l.classList.add("task-list-item"),l.classList.add(e[s].getPriority()),l.setAttribute("title","Click to view task details"),l.addEventListener("click",(function(e){c(this.children[0].textContent,t)}));var u=document.createElement("h3");u.textContent=e[s].getTaskTitle();var d=document.createElement("span");d.textContent="Due Date: "+e[s].getTaskDate(),l.appendChild(u),l.appendChild(d),o.appendChild(l)}i.style.display="block"};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y,m=document.querySelector("body"),v=[],g=[],f="myCategories",k="myToDos",p=document.querySelector(".left-pane-div"),h=document.querySelector(".right-pane-div");if(p.innerHTML='<ul><li class="outer-list-items"><span>All</span></li><li class="outer-list-items category-list"><span>Categories<i class="fa fa-caret-down"></i></span><ul class="inner-item-list"></ul></li></ul><div class="category-btns"><button class="new-category-btn">Create New Category</button><div class="edit-delete-category-div"><button class="edit-category-btn">Edit Category</button><button class="delete-category-btn">Delete Category</button></div></div>',h.innerHTML='<section class="right-pane-upper-section"><div class="inner-right-section-div"><h2 class="category-heading"></h2><div class="category-tasks-div"><ul class="tasks-list"></ul><p class="note-par"><b>NOTE: </b>red is for high-priority, green is for medium-priority, blue is for low-priority</p></div></div><h2 class="no-category-selected">Select a Category or click "All" on your left to view created tasks here.</h2></section><button class="create-task-btn">Create new Task</button><section class="task-details-section"><button class="back-btn">Back</button><div class="task-details-div"><h2 class="task-heading"></h2><p class="task-description"></p><span class="task-date"></span><span class="task-category-name"></span><span class="task-priority"></span></div><div class="task-details-btns-div"><button class="edit-task">Edit task</button><button class="delete-task">Delete task</button></div></section>',localStorage.getItem(k))for(var b,C=JSON.parse(localStorage.getItem(k)),S=0;S<C.length;S+=1)b=new r(C[S].taskTitle,C[S].taskDesc,C[S].taskDate,C[S].taskPriority,C[S].taskCat),g.push(b);if(localStorage.getItem(f)){for(var q=JSON.parse(localStorage.getItem(f)),T=0;T<q.length;T+=1)l(q[T].myName,v,f);console.log(v[0].getName())}else l("Uncategorised",v,f);for(var L=function(){var e,t=document.querySelector(".inner-list-items-active");null===t?u(g,g):(e=g.filter((function(e){return e.getTaskCat().toLowerCase()===t.textContent.toLowerCase()})),u(e,g))},w=function(){for(var e=document.querySelectorAll(".inner-list-items"),t=0;t<e.length;t+=1)e[t].addEventListener("click",(function(e){for(var t=document.querySelectorAll(".inner-list-items"),n=0;n<t.length;n+=1)t[n].classList.remove("inner-list-items-active");e.target.classList.add("inner-list-items-active"),document.querySelector(".edit-delete-category-div").style.display="flex",document.querySelector(".no-category-selected").style.display="none",document.querySelector(".category-heading").textContent=e.target.textContent;var a=g.filter((function(t){return t.getTaskCat().toLowerCase()===e.target.textContent.toLowerCase()}));u(a,g)}))},x=document.querySelectorAll(".outer-list-items > span"),E=0;E<x.length;E+=1)x[E].addEventListener("click",(function(e){for(var t=document.querySelectorAll(".outer-list-items > span"),n=0;n<t.length;n+=1)t[n].classList.remove("outer-active");switch(e.target.classList.add("outer-active"),e.target.textContent){case"All":document.querySelector(".inner-item-list").classList.remove("appear");var a=document.querySelector(".selected"),r=document.querySelector(".inner-list-items-active");document.querySelector(".edit-delete-category-div").style.display="none",document.querySelector(".no-category-selected").style.display="none",document.querySelector(".category-heading").textContent=e.target.textContent,null!=a&&a.classList.remove("selected"),null!=r&&r.classList.remove("inner-list-items-active"),u(g,g);break;case"Categories":document.querySelector(".inner-item-list").classList.toggle("appear"),e.target.children[0].classList.toggle("selected"),w()}}));var D=document.querySelector(".new-category-btn"),N=document.createElement("div");N.classList.add("category-form-div"),m.appendChild(N);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y=document.querySelector(".category-form"),document.querySelector(".close-form-btn").addEventListener("click",(function(e){document.querySelector(".category-form-div").style.visibility="hidden",document.querySelector(".category-form-div").style.opacity="0"})),y.addEventListener("submit",(function(t){var n=y.elements[0].value;if(null===e)l(n,v,f);else{for(var a=0;a<v.length;a+=1)if(v[a].getName()===e.textContent){v[a].setName(y.elements[0].value);var r=document.querySelector(".category-heading");r.textContent===e.textContent&&(r.textContent=y.elements[0].value);break}s(f,v);for(var o=0;o<g.length;o+=1)g[o].getTaskCat()===e.textContent&&g[o].setTaskCat(y.elements[0].value),console.log("I am being looped");"none"!=document.querySelector(".task-details-section").style.display&&c(document.querySelector(".task-heading").textContent,g),e.textContent=y.elements[0].value}y.reset(),document.querySelector(".category-form-div").style.visibility="hidden",document.querySelector(".category-form-div").style.opacity="0",w(),t.preventDefault()}))},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.querySelector(".close-form-btn").addEventListener("click",(function(e){document.querySelector(".category-form-div").style.visibility="hidden",document.querySelector(".category-form-div").style.opacity="0"}));var t=document.querySelector(".task-form");t.addEventListener("submit",(function(n){var a,o,i,l,y;console.log(t.elements.length);for(var m=function(r){switch(t.elements[r].id){case"task-title":var s=g.filter((function(e){return e.getTaskTitle().toLowerCase()===t.elements[r].value.toLowerCase()}));if(console.log(s.length),s.length>0&&(document.querySelector(".category-form-div").style.visibility="hidden",document.querySelector(".category-form-div").style.opacity="0",n.preventDefault(),null===e))return{v:alert("Task with that title is already taken, please enter a different task title")};a=t.elements[r].value;break;case"task-desc":o=t.elements[r].value;case"task-date":i=t.elements[r].value;case"high":case"medium":case"low":t.elements[r].checked&&(l=t.elements[r].value);break;case"todoCategories":y=t.elements[r].value}},v=0;v<t.elements.length;v+=1){var f=m(v);if("object"===d(f))return f.v}if(null===e){var p=new r(a,o,i,l,y);if(g.push(p),s(k,g),"none"===document.querySelector(".no-category-selected").style.display){var h=document.querySelector(".inner-list-items-active");if(null==h)u(g,g);else{var b=g.filter((function(e){return e.getTaskCat().toLowerCase()==h.textContent.toLowerCase()}));u(b,g)}}}else e.setTask(a,o,i,l,y),s(k,g),c(a,g);document.querySelector(".category-form-div").style.visibility="hidden",document.querySelector(".category-form-div").style.opacity="0",n.preventDefault()}))},O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.innerHTML=null===n?t():t(n.textContent),A(n),e.style.visibility="visible",e.style.opacity=1};D.addEventListener("click",(function(){O(N)})),document.querySelector(".edit-category-btn").addEventListener("click",(function(){var e=document.querySelector(".inner-list-items-active");O(N,e)})),document.querySelector(".delete-category-btn").addEventListener("click",(function(){if(confirm("Are you sure you want to delete this category ?")){var e=document.querySelector(".inner-list-items-active");if(e.textContent!=v[0].getName()){for(var t=0;t<g.length;t+=1)g[t].getTaskCat().toLowerCase()===e.textContent.toLowerCase()&&g[t].setTaskCat(v[0].getName());for(var n=0;n<v.length;n+=1)if(v[n].getName().toLowerCase()===e.textContent.toLowerCase()){v.splice(n,1);break}s(f,v),s(k,g),e.remove(),document.querySelector(".inner-right-section-div").style.display="none",document.querySelector(".no-category-selected").style.display="block",document.querySelector(".task-details-section").style.display="none",document.querySelector(".right-pane-upper-section").style.display="block",document.querySelector(".create-task-btn").style.display="block",w()}else alert("YOU ARE NOT ALLOWED TO DELETE THIS CATEGORY!")}})),document.querySelector(".create-task-btn").addEventListener("click",(function(e){var t=document.querySelector(".category-form-div");t.innerHTML=n(v),P(),t.style.visibility="visible",t.style.opacity=1})),document.querySelector(".back-btn").addEventListener("click",(function(e){L()})),document.querySelector(".delete-task").addEventListener("click",(function(e){if(confirm("Are you sure you want to delete this task?")){for(var t=document.querySelector(".task-heading").textContent,n=0;n<g.length;n+=1)if(g[n].getTaskTitle()===t){g.splice(n,1);break}L()}})),document.querySelector(".edit-task").addEventListener("click",(function(e){for(var t=document.querySelector(".task-heading"),a=0;a<g.length;a+=1)if(t.textContent===g[a].getTaskTitle()){t=g[a];break}var r=document.querySelector(".category-form-div");r.innerHTML=n(v,t),P(t),r.style.visibility="visible",r.style.opacity=1}))})();